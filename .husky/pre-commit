#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Check for large files before commit
echo "üîç Checking for large files..."
git diff --cached --name-only | while read file; do
  if [ -f "$file" ]; then
    size=$(stat -f%z "$file" 2>/dev/null || stat -c%s "$file" 2>/dev/null || echo 0)
    if [ $size -gt 10485760 ]; then
      echo "‚ö†Ô∏è  Warning: $file is larger than 10MB ($((size/1024/1024))MB)"
      echo "Consider using Git LFS or external storage for large files"
      exit 1
    fi
  fi
done

pnpm lint && pnpm test
